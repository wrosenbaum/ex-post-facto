<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>Will  Rosenbaum | Lab 03: Visualizing the Mandelbrot Set</title>
<meta name="description" content="A blog about mathematics, computer science, etc.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">



<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://gitcdn.link/repo/jwarby/jekyll-pygments-themes/master/github.css" />

<!-- Styles -->
<link rel="shortcut icon" href="/assets/img/favicon.ico">
<link rel="stylesheet" href="/assets/css/main.css">

<link rel="canonical" href="/teaching/2021s-cosc-273/labs/03-mandelbrot-set/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

  <script src="/assets/js/theme.js"></script>
  <!-- Load DarkMode JS -->
<script src="/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://willrosenbaum.com/">
       Will   Rosenbaum
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/">
              about
              
            </a>
          </li>
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/teaching/">
                teaching
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/research/">
                research
                
              </a>
          </li>
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/publications/">
                publications
                
              </a>
          </li>
          
          
	  
          <!-- Blog -->
          <li class="nav-item ">
            <a class="nav-link" href="/blog/">
              blog
              
            </a>
          </li>
          

          
            <div class = "toggle-container">
              <a id = "light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      <div class="post">

  <header class="post-header">
    <h1 class="post-title">Lab 03: Visualizing the Mandelbrot Set</h1>
    <p class="post-description">using the Java executor framework to depict the Mandelbrot set quickly</p>
  </header>

  <article>
    <hr />

<p><strong>DUE:</strong> Friday, March 26, 23:59 <a href="https://time.is/Anywhere_on_Earth">AoE</a></p>

<hr />

<p><img src="/assets/img/mandelbrot/mandelbrot-color.png" alt="" width="100%" /></p>

<h4 id="background">Background</h4>

<h5 id="the-mandelbrot-set">The Mandelbrot set</h5>

<p>The <a href="https://en.wikipedia.org/wiki/Mandelbrot_set">Mandelbrot set</a> is among the most widely depicted mathematical objects. In order to define the Mandelbrot set (and understand how to draw it), we need to start with the complex numbers and the complex plane.</p>

<h6 id="complex-numbers">Complex numbers</h6>

<p><em>Complex numbers</em> are numbers of the form \(a + b i\) where \(a\) and \(b\) are real numbers, and \(i\) is the <em>imaginary number</em> satisfying \(i^2 = -1\). Complex numbers can be added and multiplied:</p>

<ul>
  <li>
\[(a + b i) + (c + d i) = (a + c) + (b + d)i\]
  </li>
  <li>
\[(a + b i) (c + d i) = (a c - b d) + (a d + b c) i\]
  </li>
</ul>

<p>Further, complex numbers have a <em>modulus</em> defined by</p>

<ul>
  <li>
\[|  a + b i |  = \sqrt{a^2 + b^2}\]
  </li>
</ul>

<p>The <a href="https://en.wikipedia.org/wiki/Complex_number">complex plane</a> consists of the set of all complex numbers represented as points in a plane: each \(a + b i\) corresponds to the point \((a, b)\) in the plane.</p>

<h6 id="mandelbrot-definition">Mandelbrot definition</h6>

<p>Given a complex number \(c = a + b i\), consider the sequence of complex numbers \(z_1, z_2, \ldots\) defined by the following recursive formula:</p>

<ul>
  <li>
\[z_1 = c\]
  </li>
  <li>for \(n &gt; 1\), \(z_n = z_{n-1}^2 + c\).</li>
</ul>

<p>For each starting point \(c\), one of two things can happen:</p>

<ol>
  <li>the sequence \(z_1, z_2, \ldots\) remains <em>bounded</em>—i.e., there is a positive (real) number \(M\) such that \(\mid z_n \mid \leq M\)</li>
  <li>the sequence \(z_1, z_2, \ldots\) is <em>unbounded</em>—\(\mid z_1 \mid , \mid z_2 \mid , \ldots\) grows without bound.</li>
</ol>

<p>The <strong>Mandelbrot set</strong> is defined to be the set of complex numbers \(c\) for which the sequence \(z_1, z_2, \ldots\) remains bounded. For example, \(c = 1\) is not in the Mandelbrot set because its corresponding sequence is \(1, 2, 5, 26, \ldots\) which grows without bound. On the other hand, \(c = -1\) is in the Mandelbrot set because its corresponding sequence is \(-1, 0, -1, 0, \ldots\) which remains bounded.</p>

<h6 id="computing-the-mandelbrot-set">Computing the Mandelbrot set</h6>

<p>In general, it might be difficult to determine if a given sequence \(z_1, z_2,\ldots\) remains bounded analytically. To visualize the Mandelbrot set it is enough to determine if the sequence is bounded empirically. Specifically, we can choose two parameters: a modulus bound \(M\) and an iteration bound \(N\). We then proceed as follows. Starting from a complex number \(c\), compute \(z_1, z_2, \ldots\) as required. For each \(z_n\), compute \(\mid z_n\mid\) and do the following:</p>

<ol>
  <li>if \(\mid z_n\mid \geq M\), stop and report that \(c\) is not in the Mandelbrot set,</li>
  <li>if \(n = N\), stop and report that \(c\) is in the Mandelbrot set</li>
  <li>otherwise, continue.</li>
</ol>

<p>Following this procedure, we can obtain this following image of the Mandelbrot set.</p>

<p><img src="/assets/img/mandelbrot/mandelbrot-bw.png" alt="" width="50%" /></p>

<p>For points \(c\) not in the Mandelbrot set (i.e., for which case 1 above occurs), the first iteration \(n\) at which \(\mid z_n \mid \geq M\) is called the <strong>escape time</strong>. In order to generate a color image such as the image below, the color is determined by the escape time.</p>

<p><img src="/assets/img/mandelbrot/mandelbrot-color.png" alt="" width="50%" /></p>

<p>Specifically, the color of a point \(c\) is determined by a color map applied to the escape time for the point. In the image above, brighter colors indicate shorter escape times. You can read about different methods for coloring the Mandelbrot set at the following link:</p>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Plotting_algorithms_for_the_Mandelbrot_set">Plotting algorithms for the Mandelbrot set
</a></li>
</ul>

<h5 id="the-executor-framework">The executor framework</h5>

<p>The executor framework in Java provides a robust structure for handling tasks, where each task is specified as an instance of class implementing the <code class="language-plaintext highlighter-rouge">Runnable</code> (or <code class="language-plaintext highlighter-rouge">Callable</code>) interface. For this lab, you should use a “fixed thread pool” to execute tasks in parallel. This can be done by using the following the code, where <code class="language-plaintext highlighter-rouge">class MyTask implements Runnable</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// make a thread pool with nThreads threads</span>
<span class="kt">int</span> <span class="n">nThreads</span> <span class="o">=</span> <span class="o">...;</span>
<span class="nc">ExecutorService</span> <span class="n">pool</span> <span class="o">=</span> <span class="nc">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">nThreads</span><span class="o">);</span>

<span class="c1">// create and execute a task</span>
<span class="nc">MyTask</span> <span class="n">task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyTask</span><span class="o">(...);</span>
<span class="n">pool</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">task</span><span class="o">);</span>

<span class="c1">// shutdown the pool and wait for all pending tasks to complete</span>
<span class="n">pool</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
    <span class="n">pool</span><span class="o">.</span><span class="na">awaitTermination</span><span class="o">(</span><span class="nc">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">NANOSECONDS</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// do nothing</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here are links to the relevant documentation:</p>

<ul>
  <li><a href="https://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html">Executors tutorial from Oracle</a></li>
  <li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/Executor.html"><code class="language-plaintext highlighter-rouge">Executor</code> interface</a></li>
  <li><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ExecutorService.html"><code class="language-plaintext highlighter-rouge">ExecutorService</code> interface</a></li>
</ul>

<h4 id="program-description">Program description</h4>

<p>For your assignment, you should write a program that computes and draws the Mandelbrot set. Your program must use the executor framework above in order to parallelize its computation.</p>

<p>Specifically, you should complete an implementation of the <code class="language-plaintext highlighter-rouge">MandelbrotFrame</code> class linked to below. The most computationally intensive method that you must implement is <code class="language-plaintext highlighter-rouge">void updateEscapeTimes()</code>. For this method, you should apply multithreading using the aforementioned executor service. You might consider making a task consisting of computing <code class="language-plaintext highlighter-rouge">esc[i][j]</code> for a single pair of values <code class="language-plaintext highlighter-rouge">i</code>, <code class="language-plaintext highlighter-rouge">j</code>.</p>

<ul>
  <li><a href="/assets/java/2021s-cosc-273/lab03-mandelbrot/MandelbrotFrame.java"><code class="language-plaintext highlighter-rouge">MandelbrotFrame.java</code></a></li>
  <li><a href="/assets/java/2021s-cosc-273/lab03-mandelbrot/StaticViewer.java"><code class="language-plaintext highlighter-rouge">StaticViewer.java</code></a></li>
</ul>

<h4 id="what-to-turn-in">What to turn in</h4>

<p>To complete the assignment, turn in your completed <code class="language-plaintext highlighter-rouge">MandelbrotFrame</code> class, together with any other files needed for your implementation. Be sure to add a more interesting color map as well. (See <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Color.html"><code class="language-plaintext highlighter-rouge">Color</code> documentation</a> and <a href="https://en.wikipedia.org/wiki/Plotting_algorithms_for_the_Mandelbrot_set">Plotting algorithms for the Mandelbrot set</a>)</p>

<p>To test your code’s correctness, use the provided <code class="language-plaintext highlighter-rouge">StaticViewer</code> program and compare it to the graphical output above. You will also be provided with a benchmarking program to test your code’s performance.</p>

<h4 id="grading">Grading</h4>

<p>Your programs will be graded on a 6 point scale according to the following criteria:</p>

<ul>
  <li>
    <p><strong>Correctness</strong> (2 pts). Your program compiles and completes the task as specified in the program description above.</p>
  </li>
  <li><strong>Style</strong> (2 pt).
    <ul>
      <li>Coding style: code is reasonably well-organized and readable (to a human). Variables, methods, and classes  have sensible, descriptive names. Code is well-commented.</li>
      <li>Output style: color map makes a visually appealing image.</li>
    </ul>
  </li>
  <li><strong>Performance</strong> (2 pts). Performance of <code class="language-plaintext highlighter-rouge">updateEscapeTimes()</code> method is comparable to the instructor’s implementation.</li>
</ul>

<h4 id="extensions">Extensions</h4>

<p>There are a lot of directions you can go with this assignment! Here are a few:</p>

<ol>
  <li>Make a color map that makes things look much better than mine, and use it to make some nice images. (You can submit image files if you’d like.)</li>
  <li>Modify the <code class="language-plaintext highlighter-rouge">StaticViewer</code> to do an infinite zoom into an interesting portion of Mandelbrot set. If you do this, have the program print the framerate to the console.</li>
  <li>Draw other fractals! The Mandelbrot set is but one fractal in a large family of fractals produced using similar methods. For example, you could draw <a href="https://en.wikipedia.org/wiki/Newton_fractal">Newton fractals</a> or other <a href="https://en.wikipedia.org/wiki/Julia_set">Julia sets</a>.</li>
</ol>

  </article>

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    &copy; Copyright 2021 Will  Rosenbaum.
    
    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Load Common JS -->
<script src="/assets/js/common.js"></script>


</html>
